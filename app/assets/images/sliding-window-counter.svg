<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="600" height="400" viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="600" height="400" fill="white"/>
  
  <!-- Coordinate system -->
  <line x1="100" y1="350" x2="550" y2="350" stroke="black" stroke-width="2"/>
  <line x1="100" y1="350" x2="100" y2="100" stroke="black" stroke-width="2"/>
  
  <!-- Axis labels -->
  <text x="325" y="380" text-anchor="middle" font-family="Arial" font-size="14">Time</text>
  <text x="70" y="220" text-anchor="middle" font-family="Arial" font-size="14" transform="rotate(-90, 70, 220)">Number of requests</text>
  
  <!-- Previous minute window (black outline) -->
  <rect x="100" y="150" width="150" height="200" fill="none" stroke="black" stroke-width="3"/>
  
  <!-- Current minute window (blue outline) -->
  <rect x="250" y="150" width="150" height="200" fill="none" stroke="#3b82f6" stroke-width="2"/>
  
  <!-- Rolling minute (green background) -->
  <rect x="175" y="150" width="175" height="200" fill="#a7f3d0" opacity="0.6"/>
  
  <!-- Current time marker -->
  <line x1="350" y1="100" x2="350" y2="350" stroke="#333" stroke-width="1" stroke-dasharray="5,5"/>
  <polygon points="350,100 345,110 355,110" fill="#333"/>
  <text x="350" y="90" text-anchor="middle" font-family="Arial" font-size="12">Current time</text>
  
  <!-- Window labels -->
  <text x="175" y="370" text-anchor="middle" font-family="Arial" font-size="12">previous minute</text>
  <text x="325" y="370" text-anchor="middle" font-family="Arial" font-size="12">current minute</text>
  
  <!-- Rolling minute label -->
  <text x="265" y="140" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">Rolling minute</text>
  
  <!-- Request blocks in previous window -->
  <rect x="120" y="300" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  <rect x="160" y="270" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  <rect x="120" y="250" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  <rect x="170" y="320" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  
  <!-- Request blocks in current window -->
  <rect x="260" y="290" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  <rect x="290" y="260" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  <rect x="320" y="320" width="30" height="20" fill="#a5b4fc" opacity="0.7"/>
  
  <!-- Percentage markers -->
  <line x1="175" y1="170" x2="175" y2="180" stroke="black" stroke-width="1"/>
  <line x1="350" y1="170" x2="350" y2="180" stroke="black" stroke-width="1"/>
  <line x1="175" y1="175" x2="250" y2="175" stroke="black" stroke-width="1"/>
  <line x1="250" y1="175" x2="350" y2="175" stroke="black" stroke-width="1"/>
  <text x="212" y="170" text-anchor="middle" font-family="Arial" font-size="12">70%</text>
  <text x="300" y="170" text-anchor="middle" font-family="Arial" font-size="12">30%</text>
  
  <!-- Rate limit note -->
  <text x="500" y="120" text-anchor="middle" font-family="Arial" font-size="14">Rate limit: 5 requests/min</text>
  
  <!-- Caption -->
  <text x="325" y="400" text-anchor="middle" font-family="Arial" font-size="12" fill="#666">Figure 4-11</text>
</svg> 